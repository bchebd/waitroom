import{r as h,e as D,b as N,g as P,h as _,i as C,k as O,j as r,B as A,N as U,d as I}from"./index-Dbs12Sf8.js";import{b as p,I as Z,a as z,F as B}from"./index-CwssInFp.js";const w={name:"",password:""},K={nameError:null,passwordError:null},k=()=>{const[a,l]=h.useState(w),[o,i]=h.useState(K),[c,d]=h.useState(!0),m=D(),g=N(P),E=_(),S=s=>n=>{l(t=>{const e={...t,[s]:n};return j(e,s),e})},v=s=>({isEightCharacters:s.length>=8,isOneUppercase:/[A-Z]/.test(s),isOneLowercase:/[a-z]/.test(s),isOneNumber:/[0-9]/.test(s),isOneSpecialSymbol:/[^A-Za-z0-9]/.test(s)}),j=(s,n)=>{const t=`${n}Error`;if(i(e=>({...e,[t]:null})),n==="name")s.name.trim()?s.name.trim().length<3?i(e=>({...e,nameError:"Min. 3 Symbole"})):i(e=>({...e,nameError:null})):i(e=>({...e,nameError:"Kann nicht leer sein"}));else if(n==="password"){const e=v(s.password),y=Object.values(e).some(u=>u===!1);i(u=>({...u,passwordError:y?"Das Passwort muss mindestens 8 Zeichen enthalten, GroÃŸ- und Kleinbuchstaben, eine Zahl und ein Sonderzeichen.":null}))}},x=async s=>{const n=await p.genSalt(10);return await p.hash(s,n)},f=()=>!o.nameError&&!o.passwordError&&a.name.trim()!==""&&a.password.trim()!=="",F=async s=>{if(s.preventDefault(),!f())return;if(await m(C()),g.some(t=>t.name===a.name)){i(t=>({...t,nameError:"Dieser Name ist bereits vergeben"}));return}const n=await x(a.password);await m(O({name:a.name,passwd:n,admin:!1})),l(w),E("/waitroom/",{replace:!0})};return h.useEffect(()=>{(()=>{const n=Object.values(o).some(e=>e!==null),t=!a.name.trim()||!a.password.trim();d(n||t)})()},[o,a.name,a.password,c]),{name:a.name,password:a.password,nameError:o.nameError,passwordError:o.passwordError,isDisabled:c,handleChange:S,handleSubmit:F}},L="_btn_chplc_6",V="_navigation_chplc_11",G={btn:L,navigation:V},b=I.bind(G),H=()=>{const{name:a,password:l,nameError:o,passwordError:i,isDisabled:c,handleChange:d,handleSubmit:m}=k();return r.jsxs("div",{children:[r.jsx("h1",{children:"Sign up"}),r.jsxs("form",{action:"post",onSubmit:m,children:[r.jsx(Z,{value:a,onChange:d("name"),id:"name",label:"Name",placeholder:"Bsp: Tinu",error:o&&o}),r.jsx(z,{value:l,onChange:d("password"),id:"password",label:"Password",placeholder:"veryStrong_Pass1234",error:i&&i}),r.jsx(A,{type:"submit",className:b("btn"),isDisabled:c,children:"Sign up"})]}),r.jsxs("div",{className:b("navigation"),children:[r.jsx("p",{children:"Hast du bereits ein Konto?"}),r.jsx(U,{to:"/waitroom/signin",children:"Anmelden"})]})]})},T=()=>r.jsx("main",{children:r.jsx(B,{children:r.jsx(H,{})})});export{T as default};
