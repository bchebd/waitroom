import{u as v,a as T,r as g,b as N,c as p,j as e,B as b,L as E,M as k,d as A,e as D,f as L}from"./index-BaaSrBmJ.js";import{g as G}from"./useGetErrorMessage-Cpnlb4hZ.js";const S=()=>{const{data:t,isLoading:n,isError:d,error:c}=v(void 0,{pollingInterval:6e3}),[_,{isLoading:a,isError:o,error:u}]=T(),[l,i]=g.useState(!1),r=N(p),m=t?.[0]?.id??"Noch kein Ticket vorhanden",h=(()=>{const j=t?.find(x=>x.userId===Number(r.id));return j?Number(j.id):"Du hast noch kein Ticket"})(),f=()=>{r.id&&(_(r.id),a&&i(!0))};return g.useEffect(()=>{i(typeof h=="number"||a||n)},[a,n,h]),{currentTag:m,userTag:h,isDisabled:l,isLoadingA:a,isLoadingG:n,isErrorG:d,isErrorA:o,errorG:c,errorA:u,handleCreateTag:f}},y="_student_1j8mc_6",C="_student__container_1j8mc_9",M="_student__button_1j8mc_15",H="_student__list_1j8mc_66",I="_student__item_1j8mc_81",w="_student__value_1j8mc_90",B="_student__label_1j8mc_94",F={student:y,student__container:C,student__button:M,student__list:H,student__item:I,"student__item--active":"_student__item--active_1j8mc_90",student__value:w,student__label:B},s=A.bind(F),O=()=>{const{currentTag:t,userTag:n,isDisabled:d,isLoadingA:c,isLoadingG:_,isErrorA:a,isErrorG:o,errorA:u,errorG:l,handleCreateTag:i}=S();return e.jsxs(e.Fragment,{children:[e.jsx("section",{className:s("student"),children:e.jsxs("div",{className:s("student__container"),children:[e.jsxs("ul",{className:s("student__list"),children:[e.jsxs("li",{className:s("student__item",{"student__item--active":Number(n)===Number(t)}),children:[e.jsx("span",{className:s("student__label"),children:"Deine Nummer"}),e.jsx("span",{className:s("student__value"),children:n})]}),e.jsxs("li",{className:s("student__item","student__item--active"),children:[e.jsx("span",{className:s("student__label"),children:"Aktuelle Nummer"}),e.jsx("span",{className:s("student__value"),children:t})]})]}),e.jsx(b,{className:s("student__button"),onClick:i,isDisabled:d,children:"Hilfe"})]})}),(c||_)&&e.jsx(E,{}),(a||o)&&(()=>{const{status:r,message:m}=G(u||l);return e.jsxs(k,{isOpen:!0,children:[e.jsxs("div",{className:s("modal__container__header"),children:["Fehler: ",r]}),e.jsx("div",{className:s("modal__container__body"),children:m}),e.jsx("div",{className:s("modal__container__footer"),children:e.jsx(b,{onClick:()=>window.location.reload(),children:"Ok"})})]})})()]})},P=()=>{const{id:t}=N(p),n=D();return g.useEffect(()=>{t&&n(L(t))},[n,t]),{}},U=()=>(P(),e.jsx("main",{children:e.jsx(O,{})}));export{U as default};
