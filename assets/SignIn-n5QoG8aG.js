import{r as l,e as b,h as x,l as j,f as v,j as a,B as S,N,d as C}from"./index-BaaSrBmJ.js";import{b as F,I,a as P,F as y}from"./index-D7CstSmR.js";const D={name:"",password:""},_={nameError:null,passwordError:null},K=()=>{const[n,m]=l.useState(D),[t,o]=l.useState(_),[c,d]=l.useState(!0),p=b(),h=x(),w=i=>e=>{m(r=>{const s={...r,[i]:e};return g(s,i),s})},g=(i,e)=>{const r=`${e}Error`;o(s=>({...s,[r]:null})),e==="name"?i[e].trim()===""&&o(s=>({...s,[r]:"Kann nicht leer sein"})):e==="password"&&i[e].trim()===""&&o(s=>({...s,[r]:"Kann nicht leer sein"}))},f=async i=>{if(i.preventDefault(),!Object.values(t).some(r=>r!==null))try{const s=(await j.get("users")).data.find(E=>E.name.trim().toLowerCase()===n.name.trim().toLowerCase());if(!s){o({nameError:"Name oder Passwort ist falsch",passwordError:"Name oder Passwort ist falsch"});return}if(!await F.compare(n.password,s.passwd)){o({nameError:"Name oder Passwort ist falsch",passwordError:"Name oder Passwort ist falschhdghgfxhdgfhgfhg"});return}await p(v(parseInt(s.id))),h("/admin",{replace:!0})}catch(r){console.log(r)}};return l.useEffect(()=>{(()=>{const e=Object.values(t).some(s=>s!==null),r=!n.name.trim()||!n.password.trim();d(e||r)})()},[c,t,n.name,n.password]),{name:n.name,password:n.password,nameError:t.nameError,passwordError:t.passwordError,disabled:c,handleChange:w,handleSubmit:f}},L="_btn_chplc_6",k="_navigation_chplc_11",B={btn:L,navigation:k},u=C.bind(B),O=()=>{const{name:n,password:m,nameError:t,passwordError:o,disabled:c,handleChange:d,handleSubmit:p}=K();return a.jsxs("div",{children:[a.jsx("h1",{children:"Sign in"}),a.jsxs("form",{action:"post",onSubmit:p,children:[a.jsx(I,{id:"name",value:n,onChange:d("name"),label:"Name",error:t??t}),a.jsx(P,{id:"password",value:m,onChange:d("password"),label:"Password",error:o??o}),a.jsx(S,{type:"submit",className:u("btn"),isDisabled:c,children:"Sign in"})]}),a.jsxs("div",{className:u("navigation"),children:[a.jsx("p",{children:"Hast du noch kein Konto?"}),a.jsx(N,{to:"/signup",children:"Registrierung"})]})]})},A=()=>a.jsx("main",{children:a.jsx(y,{children:a.jsx(O,{})})});export{A as default};
